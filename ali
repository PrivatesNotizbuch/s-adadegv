a
body{font-family:'Cairo',sans-serif;background:#f3f6fb;margin:0}
.admin-wrap{max-width:900px;margin:36px auto;padding:12px}
.card{background:#fff;padding:16px;border-radius:10px;box-shadow:0 6px 20px rgba(10,40,80,0.06);margin-bottom:12px}
input,textarea{width:100%;padding:10px;margin:6px 0 12px;border-radius:8px;border:1px solid #d0d7e6}
button{background:#0b63d3;color:#fff;border:0;padding:10px 14px;border-radius:8px;cursor:pointer}
.row{display:flex;gap:8px}
.hidden{display:none}
.hint{color:#666;font-size:14px}
hr{border:none;border-top:1px solid #eef2f7;margin:12px 0}

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>لوحة تحكم صاحب العمل</title>
  <link rel="stylesheet" href="admin.css">
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;700&display=swap" rel="stylesheet">
</head>
<body>
  <main class="admin-wrap">
    <div id="login-box" class="card">
      <h2>تسجيل دخول</h2>
      <input id="pwd" type="password" placeholder="كلمة السر">
      <button id="loginBtn">دخول</button>
      <p class="hint">كلمة السر الافتراضية: <strong>Dammam2025!</strong></p>
    </div>

    <div id="panel" class="card hidden">
      <h2>لوحة التحكم الرئيسية</h2>

      <label>عنوان الموقع</label>
      <input id="siteTitle" type="text">

      <label>وصف الواجهة الرئيسية</label>
      <textarea id="heroDesc"></textarea>

      <label>خدمة 1 - العنوان</label>
      <input id="s1t" type="text">
      <label>خدمة 1 - الوصف</label>
      <textarea id="s1d"></textarea>

      <label>خدمة 2 - العنوان</label>
      <input id="s2t" type="text">
      <label>خدمة 2 - الوصف</label>
      <textarea id="s2d"></textarea>

      <label>خدمة 3 - العنوان</label>
      <input id="s3t" type="text">
      <label>خدمة 3 - الوصف</label>
      <textarea id="s3d"></textarea>

      <label>نص عن الشركة</label>
      <textarea id="aboutText"></textarea>

      <label>هاتف 1</label>
      <input id="phone1" type="text">
      <label>هاتف 2</label>
      <input id="phone2" type="text">

      <label>رابط انستقرام</label>
      <input id="insta" type="text">
      <label>رابط تيك توك</label>
      <input id="tiktok" type="text">
      <label>رابط خريطة</label>
      <input id="gmap" type="text">

      <div class="row">
        <button id="saveBtn">حفظ التعديلات</button>
        <button id="logoutBtn">خروج</button>
      </div>

      <hr>
      <h3>تغيير كلمة السر</h3>
      <label>كلمة السر الحالية</label>
      <input id="curPwd" type="password">
      <label>كلمة السر الجديدة</label>
      <input id="newPwd" type="password">
      <button id="changePwdBtn">تغيير كلمة السر</button>

    </div>
  </main>
  <script src="admin.js"></script>
</body>
</html>

// كلمة السر الافتراضية
const DEFAULT_PWD = 'Dammam2025!';

// helper: جلب كلمة السر المخزنة أو الافتراضية
function getStoredPwd(){
  return localStorage.getItem('adminPwd') || DEFAULT_PWD;
}

function showPanel(){
  document.getElementById('login-box').classList.add('hidden');
  document.getElementById('panel').classList.remove('hidden');
  loadSiteDataToForm();
}

function logout(){
  document.getElementById('panel').classList.add('hidden');
  document.getElementById('login-box').classList.remove('hidden');
}

function loadSiteDataToForm(){
  const data = JSON.parse(localStorage.getItem('siteData') || '{}');
  const d = Object.assign({}, {
    siteTitle: 'سطحه الدمام', heroDesc:'',
    service1Title:'',service1Desc:'',service2Title:'',service2Desc:'',service3Title:'',service3Desc:'',aboutText:'',
    phone1:'',phone2:'',insta:'',tiktok:'',gmap:''
  }, data);
  document.getElementById('siteTitle').value = d.siteTitle;
  document.getElementById('heroDesc').value = d.heroDesc;
  document.getElementById('s1t').value = d.service1Title;
  document.getElementById('s1d').value = d.service1Desc;
  document.getElementById('s2t').value = d.service2Title;
  document.getElementById('s2d').value = d.service2Desc;
  document.getElementById('s3t').value = d.service3Title;
  document.getElementById('s3d').value = d.service3Desc;
  document.getElementById('aboutText').value = d.aboutText;
  document.getElementById('phone1').value = d.phone1;
  document.getElementById('phone2').value = d.phone2;
  document.getElementById('insta').value = d.insta;
  document.getElementById('tiktok').value = d.tiktok;
  document.getElementById('gmap').value = d.gmap;
}

function saveFormToStorage(){
  const obj = {
    siteTitle: document.getElementById('siteTitle').value,
    heroDesc: document.getElementById('heroDesc').value,
    service1Title: document.getElementById('s1t').value,
    service1Desc: document.getElementById('s1d').value,
    service2Title: document.getElementById('s2t').value,
    service2Desc: document.getElementById('s2d').value,
    service3Title: document.getElementById('s3t').value,
    service3Desc: document.getElementById('s3d').value,
    aboutText: document.getElementById('aboutText').value,
    phone1: document.getElementById('phone1').value,
    phone2: document.getElementById('phone2').value,
    insta: document.getElementById('insta').value,
    tiktok: document.getElementById('tiktok').value,
    gmap: document.getElementById('gmap').value
  };
  localStorage.setItem('siteData', JSON.stringify(obj));
  alert('تم حفظ التعديلات. اذهب لصفحة الزبائن واضغط تحديث لعرض التغييرات.');
}

// أحداث
document.getElementById('loginBtn').addEventListener('click', ()=>{
  const val = document.getElementById('pwd').value;
  if(val === getStoredPwd()){
    showPanel();
  } else alert('كلمة السر غير صحيحة');
});

document.getElementById('logoutBtn').addEventListener('click', ()=>{
  logout();
});

document.getElementById('saveBtn').addEventListener('click', saveFormToStorage);

// تغيير كلمة السر
document.getElementById('changePwdBtn').addEventListener('click', ()=>{
  const cur = document.getElementById('curPwd').value;
  const neu = document.getElementById('newPwd').value;
  if(cur !== getStoredPwd()) return alert('كلمة السر الحالية غير صحيحة');
  if(!neu || neu.length < 6) return alert('اختر كلمة سر جديدة (6 حروف على الأقل)');
  localStorage.setItem('adminPwd', neu);
  alert('تم تغيير كلمة السر بنجاح');
  document.getElementById('curPwd').value='';
  document.getElementById('newPwd').value='';
});
